{% extends 'loan_app/base.html' %}

{% block content %}
<h1 style="color: #2c3e50; margin-bottom: 1rem;">Customer Dashboard</h1>

<div class="card">
    <h2 style="color: #3498db; margin-bottom: 1rem;">Welcome, {{ customer.first_name }} {{ customer.surname }}</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
        <div>
            <strong>Email:</strong> {{ customer.email }}
        </div>
        <div>
            <strong>Phone:</strong> {{ customer.phone_number }}
        </div>
        <div>
            <strong>Annual Income:</strong> ${{ customer.annual_income }}
        </div>
        <div>
            <strong>Profession:</strong> {{ customer.profession }}
        </div>
    </div>
</div>

<div class="card">
    <h2 style="color: #3498db; margin-bottom: 1rem;">Quick Actions</h2>
    <a href="{% url 'apply_loan' %}" class="btn btn-success">Apply for New Loan</a>
</div>

<div class="card">
    <h2 style="color: #3498db; margin-bottom: 1rem;">My Loan Applications</h2>
    {% if applications %}
        <table>
            <thead>
                <tr>
                    <th>Loan Type</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Date</th>
                    <th>Score</th>
                </tr>
            </thead>
            <tbody>
                {% for app in applications %}
                <tr>
                    <td>{{ app.loan_type.name }}</td>
                    <td>${{ app.requested_amount }}</td>
                    <td>
                        {% if app.status == 'approved' %}
                            <span style="color: green; font-weight: bold;">Approved</span>
                        {% elif app.status == 'rejected' %}
                            <span style="color: red; font-weight: bold;">Rejected</span>
                        {% else %}
                            <span style="color: orange; font-weight: bold;">Pending</span>
                        {% endif %}
                    </td>
                    <td>{{ app.application_date|date:"M d, Y" }}</td>
                    <td>{{ app.calculate_approval_score|floatformat:1 }}/100</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p style="text-align: center; color: #666; padding: 2rem;">No loan applications found.</p>
    {% endif %}
</div>
{% endblock %}